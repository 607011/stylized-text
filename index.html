<!DOCTYPE html>
<html>
<title>Text Styler</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<style type="text/css">
* {
  margin: 0;
  padding: 0;
}
body {
  padding: 4px 4px;
}
select, textarea {
  font-size: large;
}
.select-wrapper {
  cursor: pointer;
  display: inline-block;
  width: 240px;
  height: 30px;
  overflow: hidden;
  background-image: url(dropdown.png);
  background-position: calc(100% - 11px) 0;
  background-repeat: no-repeat;
  background-color: #3bc246;
  border: 0;
}
select {
  margin: 0;
  border: 0;
  height: 29px;
  width: calc(100% - 32px);
  position: relative;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  box-sizing: border-box;
  align-items: center;
  white-space: pre;
  display: inline-block;
  text-align: start;
  background-color: transparent;
  color: white;
  padding: .2ex .3em;
}
textarea {
  width: 90%;
  height: 9em;
  padding: 0.25ex 0.25em;
  border: 1px solid #232;
}
#output {
  font-size: x-large;
  white-space: pre;
}
</style>
<head>
  <script>
  (function(window) {
    'use strict';

    const chr = x => String.fromCodePoint(x);
    const ord = c => c.codePointAt(0);
    const range = (lo, hi) => { return {lo: lo, hi: hi || lo}; };
    const charlist = l => {
      let result = [];
      const codes = l.split('').map(c => c.codePointAt(0));
      for (let i = 0; i < codes.length; /**/) {
        result.push(chr(l.codePointAt(i)));
        i += (0xD800 <= codes[i] &&  codes[i] <= 0xDBFF) ? 2 : 1;
      }
      return result;
    };

    const SmallLetters = range(ord('a'), ord('z'));
    const CapitalLetters = range(ord('A'), ord('Z'));
    const DigitsNonNull = range(ord('1'), ord('9'));
    const Digits = range(ord('0'), ord('9'));

    const CharMaps = {
      default: [
        {
          from: {lo: 0, hi: 0xffffffff},
          to: 0
        }
      ],
      circles: [
        {
          from: CapitalLetters,
          to: ord('Ⓐ')
        },
        {
          from: SmallLetters,
          to: ord('ⓐ')
        },
        {
          from: DigitsNonNull,
          to: 0x2460
        },
        {
          from: range(ord('0')),
          to: 0x24EA
        }
      ],
      fraktur: [
        {
          from: CapitalLetters,
          to: charlist('𝔄𝔅ℭ𝔇𝔈𝔉𝔊ℌℑ𝔍𝔎𝔏𝔐𝔑𝔒𝔓𝔔ℜ𝔖𝔗𝔘𝔙𝔚𝔛𝔜ℨ')
        },
        {
          from: SmallLetters,
          to: charlist('𝔞𝔟𝔠𝔡𝔢𝔣𝔤𝔥𝔦𝔧𝔨𝔩𝔪𝔫𝔬𝔭𝔮𝔯𝔰𝔱𝔲𝔳𝔴𝔵𝔶𝔷')
        }
      ],
      fraktur_bold: [
        {
          from: CapitalLetters,
          to: 0x1D56C
        },
        {
          from: SmallLetters,
          to: 0x1D586
        }
      ],
      squares: [
        {
          from: CapitalLetters,
          to: ord('🄰')
        },
        {
          from: SmallLetters,
          to: ord('🄰')
        }
      ],
      negative_squares: [
        {
          from: CapitalLetters,
          to: ord('🅰')
        },
        {
          from: SmallLetters,
          to: ord('🅰')
        }
      ]
    };

    let inputEl = null;
    let outputEl = null;
    let conversionTypeEl = null;

    let convert = t => {
      const mappings = CharMaps[t in CharMaps ? t : 'default'];
      let output = '';
      for (let i = 0; i < inputEl.value.length; ++i) {
        const c = inputEl.value[i];
        const code = ord(c);
        let found = false;
        for (let mapping of mappings) {
          if (mapping.from.lo <= code && code <= mapping.from.hi) {
            let idx = code - mapping.from.lo;
            if (mapping.to instanceof Array) {
              output += mapping.to[idx];
            }
            else {
              output += chr(mapping.to + idx);
            }
            found = true;
          }
          if (found)
            break;
        }
        if (!found) {
          output += c;
        }
      }
      outputEl.innerHTML = output;
    };

    const transform = () => {
      convert(conversionTypeEl.options[conversionTypeEl.selectedIndex].value);
      inputEl.focus();
    };

    const main = () => {
      conversionTypeEl = document.getElementById('conversion-type');
      conversionTypeEl.addEventListener('input', transform);
      inputEl = document.getElementById('input');
      inputEl.addEventListener('input', transform);
      inputEl.focus();
      outputEl = document.getElementById('output');
    };

    window.addEventListener('load', main);
  })(window);
  </script>
</head>
<body>
  <div class="select-wrapper">
    <select id="conversion-type">
      <option value="fraktur">Fraktur</option>
      <option value="fraktur_bold">Fraktur bold</option>
      <option value="circles">Circles</option>
      <option value="squares">Squares</option>
      <option value="negative_squares">Squares (negative)</option>
    </select>
  </div>
  <div>
    <textarea id="input" placeholder="Type your text here ..."></textarea>
  </div>
  <div>
    <div id="output"></div>
  </div>
</body>
</html>
